Data: 27/07/2025, 20:31:25
ID da Mensagem: 11869

---

## üß© PASSO A PASSO PARA CRIAR O WORKFLOW DE AGENTES NO N8N

### 1. **Abrir o n8n com um canvas em branco**

* Criar um novo workflow
* Deixar o canvas limpo para adicionar os agentes

---

### 2. **Adicionar o AGENTE PRINCIPAL (Main Agent)**

* Pressione `Tab` e escolha **"AI Agent"**
* D√™ um nome, ex: `Main Agent`
* Conecte um **modelo de linguagem** via **OpenRouter**:

  * Criar conta em openrouter.ai
  * Gerar uma **API Key**
  * Colar a chave na conex√£o do modelo no n8n

---

### 3. **Criar o SUBAGENTE DE E-MAIL (Email Agent)**

* Adicionar um novo AI Agent
* Nome: `Email Agent`
* Descri√ß√£o: ‚ÄúAgente respons√°vel por enviar e-mails‚Äù
* Conectar ao mesmo modelo de IA (ou outro, se quiser)
* Configurar o **User Message** como **din√¢mico**, deixando o Main Agent preencher com o que deve ser feito

#### Adicionar ferramenta:

* Clique em `+ Tool`
* Escolha `Gmail Tool`
* Configure:

  * Tipo: `Text`
  * Campos din√¢micos: para, assunto, corpo
  * Desabilite assinatura autom√°tica do n8n

---

### 4. **Criar o SUBAGENTE DE CALEND√ÅRIO (Calendar Agent)**

* Mesmo processo do Email Agent
* Nome: `Calendar Agent`
* Descri√ß√£o: ‚ÄúCria eventos no Google Calendar‚Äù
* Conectar ao mesmo modelo ou outro

#### Adicionar ferramenta:

* Ferramenta: `Google Calendar`
* Opera√ß√£o: `Create Event`
* Campos configurados:

  * Start time
  * End time
  * Summary (t√≠tulo do evento)
* Deixe os valores para o modelo decidir dinamicamente

---

### 5. **Ajustar o prompt do AGENTE PRINCIPAL**

* Adicionar um **system prompt** claro:

  ```  Voc√™ √© um agente orquestrador. Sua fun√ß√£o √© decidir qual subagente usar para cada tarefa. N√£o execute a√ß√µes diretamente. Apenas repasse o comando ao subagente adequado.
  ```

---

### 6. L**igar os AGENTES com o AGENTE PRINCIPAL
**
* Em ‚ÄúTools‚Äù do Main Agent:

  * Adicionar E`mail Agent `como ferramenta
  * Adicionar C`alendar Agent `como ferramenta

---

### 7. T**estar a comunica√ß√£o via chat
**
* Use um n√≥ de entrada, como T**elegram Trigger **ou W**ebhook,** para simular um usu√°rio
* Envie mensagens como:

   ``` Crie um evento para hoje √†s 14h com t√≠tulo "Revisar projeto"
  
```
---

### 8. Co**rrigir erros observando os LOGS

*** V√° at√© o Ag**ent Logs n**o Main Agent
* Veja qual agente foi chamado, com qual mensagem e se houve erro
* Ex: se data incorreta ‚Üí adicionar ao system prompt:

    ```A data atual √©: {{ $now }}
  

```---

### 9. Adi**cionar planilha de LOG (opcional)

*** Use um n√≥ Goo`gle Sheets
* `Salve: hora, prompt, a√ß√µes, tokens usados

---

### 10. Exp**ortar ou clonar o workflow

*** Ao final, o autor disponibiliza o JSON para duplicar o workflow
* Voc√™ pode importar esse JSON no seu ambiente n8n